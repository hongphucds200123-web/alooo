import os, zipfile, shutil

# Create a clean new project using prepared resources (shared style + multipage skeleton)
base_dir = "/mnt/data/first-year-playbook-from-scratch"
if os.path.exists(base_dir):
    shutil.rmtree(base_dir)
os.makedirs(base_dir, exist_ok=True)
assets_dir = os.path.join(base_dir, "assets")
os.makedirs(assets_dir, exist_ok=True)

# Reuse the prepared QR if it exists
qr_src = "/mnt/data/first-year-playbook-qr.png"
if os.path.exists(qr_src):
    shutil.copy(qr_src, os.path.join(assets_dir, "qr.png"))

# Shared CSS (prepared "dark + glow" style)
style_css = """:root{color-scheme:dark}
html{scroll-behavior:smooth}
.bg-grid{background-image:radial-gradient(circle at 1px 1px, rgba(255,255,255,.10) 1px, transparent 0);background-size:26px 26px;}
.noise::before{content:"";position:absolute;inset:0;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="240" height="240"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency=".9" numOctaves="3" stitchTiles="stitch"/></filter><rect width="240" height="240" filter="url(%23n)" opacity=".12"/></svg>');opacity:.18;pointer-events:none;mix-blend-mode:overlay;}
.glow{filter:blur(52px);opacity:.55;transform:translateZ(0)}
.glass{background:linear-gradient(180deg, rgba(255,255,255,.10) 0%, rgba(255,255,255,.06) 100%);border:1px solid rgba(255,255,255,.10);box-shadow:0 10px 30px rgba(0,0,0,.25);backdrop-filter:blur(10px);}
.panel{background:rgba(2,6,23,.35);border:1px solid rgba(255,255,255,.10);}
"""
with open(os.path.join(assets_dir, "style.css"), "w", encoding="utf-8") as f:
    f.write(style_css)

# Small helper to write files
def write(path, content):
    with open(path, "w", encoding="utf-8") as f:
        f.write(content)

# Common layout parts
common_head = """<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{title}</title>
  <meta name="description" content="{desc}" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {{
      theme: {{
        extend: {{
          fontFamily: {{ sans: ['Inter', 'system-ui', '-apple-system', 'Segoe UI'] }},
          boxShadow: {{ soft: '0 10px 30px rgba(0,0,0,.25)' }}
        }}
      }}
    }}
  </script>
  <link rel="stylesheet" href="assets/style.css" />
</head>
"""

background = """  <div class="fixed inset-0 -z-10">
    <div class="absolute inset-0 bg-gradient-to-b from-indigo-700/20 via-slate-950 to-slate-950"></div>
    <div class="absolute inset-0 bg-grid opacity-60"></div>
    <div class="absolute inset-0 noise"></div>
    <div class="absolute -top-24 -left-32 w-[520px] h-[520px] rounded-full bg-indigo-500 glow"></div>
    <div class="absolute top-40 -right-40 w-[620px] h-[620px] rounded-full bg-fuchsia-500 glow"></div>
  </div>
"""

def header(active=""):
    def link(text, href, key):
        cls = "text-white font-semibold" if active == key else "text-slate-200 hover:text-white"
        return f'<a class="{cls}" href="{href}">{text}</a>'
    return f"""  <header class="sticky top-0 z-50 border-b border-white/10 bg-slate-950/65 backdrop-blur">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between gap-4">
      <a href="index.html" class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-2xl bg-white/10 border border-white/10 flex items-center justify-center"><span class="text-lg">üìò</span></div>
        <div class="leading-tight">
          <div class="font-extrabold">First Year Playbook</div>
          <div class="text-xs text-slate-300">ƒê·ªãnh h∆∞·ªõng h·ªçc t·∫≠p & th√≠ch nghi cho nƒÉm nh·∫•t</div>
        </div>
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        {link("Gi·ªõi thi·ªáu","about.html","about")}
        {link("V·∫•n ƒë·ªÅ","problem.html","problem")}
        {link("Gi·∫£i ph√°p","solution.html","solution")}
        {link("C·∫•u tr√∫c","structure.html","structure")}
        {link("Modules","modules.html","modules")}
        {link("FAQ","faq.html","faq")}
      </nav>

      <a href="modules.html" class="inline-flex items-center gap-2 px-4 py-2 rounded-2xl bg-white text-slate-950 font-semibold shadow-soft hover:opacity-90 transition">
        B·∫Øt ƒë·∫ßu <span aria-hidden="true">‚Üí</span>
      </a>
    </div>
  </header>
"""

footer = """  <footer class="border-t border-white/10">
    <div class="max-w-6xl mx-auto px-4 py-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-3">
      <div>
        <div class="font-extrabold">First Year Playbook</div>
        <div class="text-sm text-slate-300 mt-1">Multi-page starter ‚Ä¢ headings-only</div>
      </div>
      <div class="text-sm text-slate-300">¬© 2026</div>
    </div>
  </footer>
"""

def card(label, href, hint=""):
    hint_html = f'<div class="mt-2 text-sm text-slate-200/90">{hint}</div>' if hint else ""
    return f"""<a href="{href}" class="glass rounded-3xl p-6 hover:bg-white/10 transition">
  <div class="flex items-center justify-between">
    <div class="font-extrabold">{label}</div><span class="text-slate-300">‚Üí</span>
  </div>
  {hint_html}
</a>"""

def make_page(title, active, h1, desc, cards=None):
    cards_html = ""
    if cards:
        cards_html = '<div class="mt-8 grid md:grid-cols-2 gap-6">\n' + "\n".join(cards) + "\n</div>"
    return common_head.format(title=title, desc=desc) + f"""
<body class="bg-slate-950 text-slate-100 font-sans">
{background}
{header(active)}
  <main class="max-w-6xl mx-auto px-4 pt-14 pb-16">
    <div class="glass rounded-3xl p-8">
      <p class="text-xs text-slate-300">Headings only ‚Ä¢ (ƒë·ªï n·ªôi dung chi ti·∫øt sau)</p>
      <h1 class="mt-2 text-3xl md:text-4xl font-black tracking-tight">{h1}</h1>
      <p class="mt-3 text-slate-200/90">{desc}</p>

      <div class="mt-8 flex flex-wrap gap-3">
        <a href="index.html" class="px-5 py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:bg-white/10 transition">‚Üê Trang ch·ªß</a>
        <a href="modules.html" class="px-5 py-3 rounded-2xl bg-white text-slate-950 font-bold shadow-soft hover:opacity-90 transition">Xem Modules</a>
      </div>

      {cards_html}
    </div>
  </main>
{footer}
</body>
</html>
""".strip() + "\n"

# index.html with QR block if available
qr_block = ""
if os.path.exists(os.path.join(assets_dir, "qr.png")):
    qr_block = """
      <div class="mt-8 glass rounded-3xl p-6 flex flex-col sm:flex-row items-start sm:items-center gap-6">
        <div class="shrink-0">
          <img src="assets/qr.png" alt="QR code" class="w-40 h-40 rounded-2xl border border-white/10 bg-white p-2" />
        </div>
        <div>
          <div class="font-extrabold text-xl">Scan ƒë·ªÉ v√†o website</div>
          <div class="text-sm text-slate-200 mt-2">B·∫°n c√≥ th·ªÉ thay QR n√†y b·∫±ng QR GitHub Pages/Netlify sau khi deploy.</div>
          <div class="mt-4 text-xs text-slate-300">assets/qr.png</div>
        </div>
      </div>
    """

index_html = common_head.format(title="First Year Playbook", desc="Multi-page website skeleton") + f"""
<body class="bg-slate-950 text-slate-100 font-sans">
{background}
{header("")}

  <section class="max-w-6xl mx-auto px-4 pt-16 pb-14">
    <div class="grid lg:grid-cols-2 gap-10 items-start">
      <div>
        <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-white/15 bg-white/5 text-xs text-slate-200">
          <span aria-hidden="true">üéì</span><span>D√†nh cho SV nƒÉm nh·∫•t ‚Ä¢ ph√π h·ª£p c·∫£ SV & gi·∫£ng vi√™n</span>
        </div>

        <h1 class="mt-5 text-4xl md:text-5xl font-black tracking-tight leading-tight">
          First Year Playbook
          <span class="block text-slate-200 font-extrabold mt-2">Multi-page template (headings-only)</span>
        </h1>

        <p class="mt-5 text-slate-200/90 text-lg leading-relaxed">
          M·ªói m·ª•c l√† <span class="text-white font-semibold">m·ªôt trang ri√™ng</span>. Hi·ªán ch·ªâ c√≥ ƒë·ªÅ m·ª•c ch√≠nh ƒë·ªÉ b·∫°n demo/pitch; n·ªôi dung chi ti·∫øt s·∫Ω th√™m sau.
        </p>

        <div class="mt-7 flex flex-wrap gap-3">
          <a href="modules.html" class="px-5 py-3 rounded-2xl bg-white text-slate-950 font-bold shadow-soft hover:opacity-90 transition">V√†o Modules</a>
          <a href="structure.html" class="px-5 py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:bg-white/10 transition">Xem c·∫•u tr√∫c</a>
        </div>
      </div>

      <div class="lg:pl-8">
        <div class="glass rounded-3xl overflow-hidden">
          <div class="p-6 md:p-8">
            <div class="text-sm text-slate-200">Th√¥ng ƒëi·ªáp c·ªët l√µi</div>
            <div class="mt-2 text-2xl md:text-3xl font-black leading-snug">
              ‚ÄúH·ªçc ƒë·∫°i h·ªçc kh√¥ng kh√≥.
              <span class="block text-slate-200">Kh√≥ l√† kh√¥ng bi·∫øt lu·∫≠t ch∆°i.‚Äù</span>
            </div>

            <div class="mt-6 grid gap-3">
              <div class="panel rounded-2xl p-4"><div class="font-semibold">Pages</div><div class="text-sm text-slate-200 mt-1">About ‚Ä¢ Problem ‚Ä¢ Solution ‚Ä¢ Structure</div></div>
              <div class="panel rounded-2xl p-4"><div class="font-semibold">Modules</div><div class="text-sm text-slate-200 mt-1">Module 1‚Äì5 (click ‚Üí detail)</div></div>
              <div class="panel rounded-2xl p-4"><div class="font-semibold">FAQ</div><div class="text-sm text-slate-200 mt-1">Quick help & h·ªèi ƒë√°p (placeholder)</div></div>
            </div>
          </div>
          <div class="border-t border-white/10 p-5 bg-slate-950/30 flex items-center justify-between">
            <div class="text-sm text-slate-200">Tr·∫°ng th√°i</div><div class="text-sm font-semibold text-white">Ready to deploy</div>
          </div>
        </div>
      </div>
    </div>

    {qr_block}

  </section>

  <section class="max-w-6xl mx-auto px-4 pb-16">
    <h2 class="text-2xl md:text-3xl font-black">Chuy√™n m·ª•c ch√≠nh</h2>
    <p class="mt-2 text-slate-200/90">Click ƒë·ªÉ ƒëi sang t·ª´ng trang.</p>

    <div class="mt-8 grid md:grid-cols-2 gap-6">
      {card("About the Website","about.html")}
      {card("Problem","problem.html")}
      {card("Solution & Purpose","solution.html")}
      {card("Website Structure","structure.html")}
      <a href="modules.html" class="glass rounded-3xl p-6 hover:bg-white/10 transition md:col-span-2">
        <div class="flex items-center justify-between"><div class="font-extrabold">Modules (1‚Äì5)</div><span class="text-slate-300">‚Üí</span></div>
      </a>
      <a href="faq.html" class="glass rounded-3xl p-6 hover:bg-white/10 transition md:col-span-2">
        <div class="flex items-center justify-between"><div class="font-extrabold">Quick Help & FAQ</div><span class="text-slate-300">‚Üí</span></div>
      </a>
    </div>
  </section>

{footer}
</body>
</html>
""".strip() + "\n"
write(os.path.join(base_dir, "index.html"), index_html)

# Core pages
write(os.path.join(base_dir, "about.html"), make_page("First Year Playbook ‚Äî About","about","About the Website","Gi·ªõi thi·ªáu d·ª± √°n & ƒëi·ªÉm kh√°c bi·ªát (placeholder).",
                                                      cards=[card("Problem","problem.html","B·ªëi c·∫£nh & kh√≥ khƒÉn c·ªßa sinh vi√™n."),
                                                             card("Solution & Purpose","solution.html","M·ª•c ti√™u v√† c√°ch website gi·∫£i quy·∫øt.")]))
write(os.path.join(base_dir, "problem.html"), make_page("First Year Playbook ‚Äî Problem","problem","Problem","V·∫•n ƒë·ªÅ v√† b·ªëi c·∫£nh c·∫ßn gi·∫£i quy·∫øt (placeholder).",
                                                        cards=[card("Solution & Purpose","solution.html","ƒêi t·ªõi gi·∫£i ph√°p."),
                                                               card("FAQ","faq.html","Xem khu gi·∫£i ƒë√°p nhanh.")]))
write(os.path.join(base_dir, "solution.html"), make_page("First Year Playbook ‚Äî Solution","solution","Solution & Purpose","Gi·∫£i ph√°p & m·ª•c ti√™u website (placeholder).",
                                                         cards=[card("Website Structure","structure.html","Xem c·∫•u tr√∫c n·ªôi dung."),
                                                                card("Deliverables","deliverables.html","PDF, Video, Quiz/FAQ (placeholder).")]))
write(os.path.join(base_dir, "structure.html"), make_page("First Year Playbook ‚Äî Structure","structure","Website Structure","C·∫•u tr√∫c website nh∆∞ s·ªï tay sinh vi√™n s·ªë (placeholder).",
                                                          cards=[card("Main Content Sections","sections.html","C√°c chuy√™n m·ª•c n·ªôi dung ch√≠nh."),
                                                                 card("Modules","modules.html","Danh s√°ch 5 modules.")]))
write(os.path.join(base_dir, "sections.html"), make_page("First Year Playbook ‚Äî Sections","structure","Main Content Sections","C√°c chuy√™n m·ª•c ch√≠nh (placeholder).",
                                                         cards=[card("Study Tips & Learning Experience","study-tips.html","Kinh nghi·ªám & m·∫πo h·ªçc t·∫≠p."),
                                                                card("Academic Guidelines","guidelines.html","H∆∞·ªõng d·∫´n h·ªçc v·ª•."),
                                                                card("Quick Help & FAQ","faq.html","Gi·∫£i ƒë√°p nhanh cho sinh vi√™n.")]))
write(os.path.join(base_dir, "deliverables.html"), make_page("First Year Playbook ‚Äî Deliverables","solution","Deliverables","PDF ‚Ä¢ Video ‚Ä¢ Quiz/FAQ (placeholder).",
                                                             cards=[card("Modules","modules.html","ƒêi t·ªõi 5 modules."),
                                                                    card("FAQ","faq.html","ƒêi t·ªõi FAQ.")]))
write(os.path.join(base_dir, "study-tips.html"), make_page("First Year Playbook ‚Äî Study Tips","structure","Study Tips & Learning Experience","Kinh nghi·ªám & m·∫πo h·ªçc t·∫≠p (placeholder)."))
write(os.path.join(base_dir, "guidelines.html"), make_page("First Year Playbook ‚Äî Academic Guidelines","structure","Academic Guidelines","H∆∞·ªõng d·∫´n h·ªçc v·ª• (placeholder)."))
write(os.path.join(base_dir, "faq.html"), make_page("First Year Playbook ‚Äî FAQ","faq","Quick Help & FAQ","Gi·∫£i ƒë√°p nhanh & h·ªèi ƒë√°p (placeholder)."))

# Modules listing
modules_html = common_head.format(title="First Year Playbook ‚Äî Modules", desc="5 modules") + f"""
<body class="bg-slate-950 text-slate-100 font-sans">
{background}
{header("modules")}
  <main class="max-w-6xl mx-auto px-4 pt-14 pb-16">
    <div class="glass rounded-3xl p-8">
      <p class="text-xs text-slate-300">Headings only ‚Ä¢ (ƒë·ªï n·ªôi dung chi ti·∫øt sau)</p>
      <h1 class="mt-2 text-3xl md:text-4xl font-black tracking-tight">5 Modules</h1>
      <p class="mt-3 text-slate-200/90">Ch·ªçn module ƒë·ªÉ v√†o trang ri√™ng.</p>

      <div class="mt-8 grid md:grid-cols-2 gap-6">
        {card("Module 1","module-1.html","From High School to University")}
        {card("Module 2","module-2.html","How Lecturers Grade Your Work")}
        {card("Module 3","module-3.html","How to Avoid Academic Mistakes")}
        {card("Module 4","module-4.html","Using AI as a Learning Assistant")}
        <a href="module-5.html" class="glass rounded-3xl p-6 hover:bg-white/10 transition md:col-span-2">
          <div class="flex items-center justify-between"><div class="font-extrabold">Module 5</div><span class="text-slate-300">‚Üí</span></div>
          <div class="mt-2 text-sm text-slate-200/90">Survival Tips from Seniors</div>
        </a>
      </div>

      <div class="mt-8 flex flex-wrap gap-3">
        <a href="index.html" class="px-5 py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:bg-white/10 transition">‚Üê Trang ch·ªß</a>
        <a href="faq.html" class="px-5 py-3 rounded-2xl bg-white text-slate-950 font-bold shadow-soft hover:opacity-90 transition">ƒêi t·ªõi FAQ</a>
      </div>
    </div>
  </main>
{footer}
</body>
</html>
""".strip() + "\n"
write(os.path.join(base_dir, "modules.html"), modules_html)

# Module detail pages
module_map = [
    ("module-1.html","Module 1 ‚Äî From High School to University","From High School to University"),
    ("module-2.html","Module 2 ‚Äî How Lecturers Grade Your Work","How Lecturers Grade Your Work"),
    ("module-3.html","Module 3 ‚Äî How to Avoid Academic Mistakes","How to Avoid Academic Mistakes"),
    ("module-4.html","Module 4 ‚Äî Using AI as a Learning Assistant","Using AI as a Learning Assistant (Not a Shortcut)"),
    ("module-5.html","Module 5 ‚Äî Survival Tips from Seniors","Survival Tips from Seniors"),
]
for fn, h1, d in module_map:
    write(os.path.join(base_dir, fn), make_page(f"First Year Playbook ‚Äî {h1}","modules",h1,f"{d} (placeholder).",
                                                cards=[card("Back to Modules","modules.html","Quay v·ªÅ danh s√°ch modules."),
                                                       card("FAQ","faq.html","C√¢u h·ªèi th∆∞·ªùng g·∫∑p.")]))
# README
write(os.path.join(base_dir, "README.txt"),
      "C√°ch deploy GitHub Pages: Upload to√†n b·ªô file (gi·ªØ index.html ·ªü root) ‚Üí Settings ‚Üí Pages ‚Üí main / root.\n")

# Zip it
zip_path = "/mnt/data/first-year-playbook-from-scratch.zip"
with zipfile.ZipFile(zip_path, "w", compression=zipfile.ZIP_DEFLATED) as z:
    for root, _, files in os.walk(base_dir):
        for file in files:
            full = os.path.join(root, file)
            z.write(full, arcname=os.path.relpath(full, base_dir))

zip_path
